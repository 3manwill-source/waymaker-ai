<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WayMaker AI - Join Our Community</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .cross-compass {
            background: linear-gradient(45deg, #60a5fa, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #374151;
        }
        
        .step-indicator {
            transition: all 0.3s ease;
        }
        
        .step-active {
            background: #3b82f6;
            color: white;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        
        .step-complete {
            background: #10b981;
            color: white;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .floating-label {
            position: relative;
        }
        
        .floating-label input,
        .floating-label select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #374151;
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #1f2937;
            color: #f9fafb;
        }
        
        .floating-label input:focus,
        .floating-label select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .floating-label label {
            position: absolute;
            left: 1rem;
            top: 1rem;
            background: #1f2937;
            padding: 0 0.5rem;
            color: #9ca3af;
            font-size: 1rem;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .floating-label input:focus + label,
        .floating-label input:not(:placeholder-shown) + label,
        .floating-label select:focus + label,
        .floating-label select:not([value=""]) + label {
            top: -0.5rem;
            font-size: 0.875rem;
            color: #3b82f6;
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.5);
        }
        
        .access-tier-card {
            border: 2px solid #374151;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #1f2937;
        }
        
        .access-tier-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
            background: #253446;
        }
        
        .access-tier-card.selected {
            border-color: #10b981;
            background: #064e3b;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .progress-line {
            background: #374151;
        }
        
        .progress-line.active {
            background: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center p-4">

    <!-- Main Container -->
    <div class="welcome-card rounded-2xl p-8 max-w-2xl w-full">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="text-6xl cross-compass font-bold mb-4">‚úùÔ∏è‚ö™</div>
            <h1 class="text-3xl font-bold text-white mb-2">Welcome to WayMaker AI</h1>
            <p class="text-lg text-gray-300 mb-4">Your path to living God's will ‚Äî step by step</p>
            <div class="text-sm text-gray-400 italic">"For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, to give you hope and a future." - Jeremiah 29:11</div>
        </div>

        <!-- Progress Steps -->
        <div class="flex justify-center mb-8">
            <div class="flex items-center space-x-4">
                <div class="step-indicator step-active w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">1</div>
                <div class="progress-line w-8 h-0.5"></div>
                <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-gray-700 text-gray-400">2</div>
                <div class="progress-line w-8 h-0.5"></div>
                <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-gray-700 text-gray-400">3</div>
            </div>
        </div>

        <!-- Welcome Message -->
        <div class="bg-blue-900/20 border-l-4 border-blue-400 p-4 mb-8 rounded-r-lg">
            <div class="flex">
                <div class="ml-3">
                    <p class="text-sm text-blue-300">
                        <strong>üåü Zero Storage - Maximum Privacy!</strong><br>
                        We don't store your personal information. Just tell us your name to join our faith community. 
                        You'll re-enter this simple info each visit for complete privacy and accessibility.
                    </p>
                </div>
            </div>
        </div>

        <!-- Form -->
        <form id="joinForm">
            
            <!-- Step 1: Basic Info -->
            <div id="step1" class="step-content">
                <h3 class="text-xl font-semibold text-white mb-6">Tell us about yourself</h3>
                
                <div class="form-group">
                    <div class="floating-label">
                        <input type="text" id="userName" name="userName" placeholder=" " required>
                        <label for="userName">Your Name *</label>
                    </div>
                    <p class="text-sm text-gray-400 mt-1">How would you like our community to address you?</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-group">
                        <div class="floating-label">
                            <select id="userAge" name="userAge" required>
                                <option value="">Select Age Group</option>
                                <option value="Under 12">Under 12</option>
                                <option value="12-17">12-17 (Teen)</option>
                                <option value="18-25">18-25 (Young Adult)</option>
                                <option value="26-40">26-40 (Adult)</option>
                                <option value="41-60">41-60 (Mature Adult)</option>
                                <option value="Over 60">Over 60 (Senior)</option>
                            </select>
                            <label for="userAge">Age Group *</label>
                        </div>
                        <p class="text-sm text-gray-400 mt-1">Helps us provide age-appropriate biblical guidance</p>
                    </div>

                    <div class="form-group">
                        <div class="floating-label">
                            <select id="language" name="language">
                                <option value="English">English</option>
                                <option value="Spanish">Espa√±ol</option>
                                <option value="French">Fran√ßais</option>
                                <option value="Portuguese">Portugu√™s</option>
                                <option value="Chinese">‰∏≠Êñá</option>
                            </select>
                            <label for="language">Preferred Language</label>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="button" onclick="nextStep()" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold">
                        Continue ‚Üí
                    </button>
                </div>
            </div>

            <!-- Step 2: Community Type -->
            <div id="step2" class="step-content hidden">
                <h3 class="text-xl font-semibold text-white mb-6">How are you joining our community?</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="access-tier-card p-4 rounded-xl" onclick="selectUserType('individual')">
                        <div class="text-center">
                            <div class="text-3xl mb-3">üôè</div>
                            <h4 class="font-semibold text-white mb-2">Individual</h4>
                            <p class="text-sm text-gray-300">Personal spiritual guidance and biblical wisdom</p>
                        </div>
                    </div>

                    <div class="access-tier-card p-4 rounded-xl" onclick="selectUserType('family')">
                        <div class="text-center">
                            <div class="text-3xl mb-3">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <h4 class="font-semibold text-white mb-2">Family</h4>
                            <p class="text-sm text-gray-300">Family-focused biblical teaching and parenting guidance</p>
                        </div>
                    </div>

                    <div class="access-tier-card p-4 rounded-xl" onclick="selectUserType('community_partner')">
                        <div class="text-center">
                            <div class="text-3xl mb-3">ü§ù</div>
                            <h4 class="font-semibold text-white mb-2">Community Partner</h4>
                            <p class="text-sm text-gray-300">Ministry support and community leadership guidance</p>
                        </div>
                    </div>
                </div>

                <div class="hidden" id="familyOptions">
                    <div class="form-group">
                        <div class="floating-label">
                            <select id="familySize" name="familySize">
                                <option value="">Select Family Size</option>
                                <option value="2">2 members</option>
                                <option value="3-4">3-4 members</option>
                                <option value="5-6">5-6 members</option>
                                <option value="7+">7+ members</option>
                            </select>
                            <label for="familySize">Family Size</label>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between">
                    <button type="button" onclick="prevStep()" class="text-gray-400 px-4 py-2 rounded-xl font-semibold hover:bg-gray-800">
                        ‚Üê Back
                    </button>
                    <button type="button" id="step2Next" onclick="nextStep()" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold" disabled>
                        Continue ‚Üí
                    </button>
                </div>
            </div>

            <!-- Step 3: Access Tier -->
            <div id="step3" class="step-content hidden">
                <h3 class="text-xl font-semibold text-white mb-6">Choose your access level</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="access-tier-card p-6 rounded-xl" onclick="selectAccessTier('basic')">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üìñ</div>
                            <h4 class="font-semibold text-white text-lg mb-3">Basic Access</h4>
                            <div class="text-left space-y-2 text-sm text-gray-300">
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Biblical guidance and prayer support</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Community chat access</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Age-appropriate responses</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Verse lookups and explanations</div>
                            </div>
                        </div>
                    </div>

                    <div class="access-tier-card p-6 rounded-xl" onclick="selectAccessTier('equity')">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üéÅ</div>
                            <h4 class="font-semibold text-white text-lg mb-3">Equity Access</h4>
                            <div class="text-left space-y-2 text-sm text-gray-300">
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Everything in Basic</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Enhanced crisis support</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Specialized family resources</div>
                                <div class="flex items-center"><span class="text-green-400 mr-2">‚úì</span> Community partnership opportunities</div>
                                <div class="text-xs text-purple-400 mt-3 font-medium">For underserved communities and families in need</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Referral Code -->
                <div class="bg-yellow-900/20 border border-yellow-700 rounded-xl p-4 mb-6">
                    <div class="form-group mb-0">
                        <div class="floating-label">
                            <input type="text" id="referralCode" name="referralCode" placeholder=" ">
                            <label for="referralCode">Referral Code (Optional)</label>
                        </div>
                        <p class="text-sm text-yellow-300 mt-2">Have a referral code from a community partner? Enter it here for enhanced access and support.</p>
                    </div>
                </div>

                <div class="flex justify-between">
                    <button type="button" onclick="prevStep()" class="text-gray-400 px-4 py-2 rounded-xl font-semibold hover:bg-gray-800">
                        ‚Üê Back
                    </button>
                    <button type="submit" id="joinButton" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold" disabled>
                        Join Community ‚Üí
                    </button>
                </div>
            </div>

        </form>

        <!-- Footer -->
        <div class="text-center mt-8 pt-6 border-t border-gray-700">
            <p class="text-sm text-gray-400">
                Powered by WayMaker AI ‚Ä¢ Faith-based community support ‚Ä¢ Zero data storage
            </p>
            <p class="text-xs text-gray-500 mt-2">
                "Trust in the Lord with all your heart and lean not on your own understanding" - Proverbs 3:5
            </p>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedUserType = '';
        let selectedAccessTier = '';

        function nextStep() {
            if (currentStep === 1) {
                // Validate Step 1
                const userName = document.getElementById('userName');
                const userAge = document.getElementById('userAge');
                
                if (!userName || !userName.value.trim()) {
                    alert('Please enter your name.');
                    return;
                }
                
                if (!userAge || !userAge.value) {
                    alert('Please select your age group.');
                    return;
                }
                
                currentStep = 2;
                showStep(2);
                updateProgressSteps();
            } else if (currentStep === 2) {
                if (!selectedUserType) {
                    alert('Please select how you\'re joining our community.');
                    return;
                }
                
                currentStep = 3;
                showStep(3);
                updateProgressSteps();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressSteps();
            }
        }

        function showStep(stepNumber) {
            // Hide all steps
            const steps = document.querySelectorAll('.step-content');
            if (steps) {
                steps.forEach(step => {
                    if (step) step.classList.add('hidden');
                });
            }
            
            // Show current step
            const currentStepEl = document.getElementById('step' + stepNumber);
            if (currentStepEl) {
                currentStepEl.classList.remove('hidden');
            }
        }

        function updateProgressSteps() {
            const steps = document.querySelectorAll('.step-indicator');
            const lines = document.querySelectorAll('.progress-line');
            
            if (steps) {
                steps.forEach((step, index) => {
                    if (!step) return;
                    
                    step.classList.remove('step-active', 'step-complete');
                    
                    if (index + 1 < currentStep) {
                        step.classList.add('step-complete');
                    } else if (index + 1 === currentStep) {
                        step.classList.add('step-active');
                    } else {
                        step.classList.add('bg-gray-700', 'text-gray-400');
                    }
                });
            }
            
            if (lines) {
                lines.forEach((line, index) => {
                    if (!line) return;
                    
                    if (index + 1 < currentStep) {
                        line.classList.add('active');
                    } else {
                        line.classList.remove('active');
                    }
                });
            }
        }

        function selectUserType(type) {
            selectedUserType = type;
            
            // Update UI
            const cards = document.querySelectorAll('.access-tier-card');
            if (cards) {
                cards.forEach(card => {
                    if (card) card.classList.remove('selected');
                });
            }
            
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('selected');
            }
            
            // Show/hide family options
            const familyOptions = document.getElementById('familyOptions');
            if (familyOptions) {
                if (type === 'family') {
                    familyOptions.classList.remove('hidden');
                } else {
                    familyOptions.classList.add('hidden');
                }
            }
            
            // Enable next button
            const step2Next = document.getElementById('step2Next');
            if (step2Next) {
                step2Next.disabled = false;
                step2Next.classList.remove('opacity-50');
            }
        }

        function selectAccessTier(tier) {
            selectedAccessTier = tier;
            
            // Update UI
            const cards = document.querySelectorAll('.access-tier-card');
            if (cards) {
                cards.forEach(card => {
                    if (card) card.classList.remove('selected');
                });
            }
            
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('selected');
            }
            
            // Enable join button
            const joinButton = document.getElementById('joinButton');
            if (joinButton) {
                joinButton.disabled = false;
                joinButton.classList.remove('opacity-50');
            }
        }

        // Form submission
        const joinForm = document.getElementById('joinForm');
        if (joinForm) {
            joinForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Collect all form data safely
                const userNameEl = document.getElementById('userName');
                const userAgeEl = document.getElementById('userAge');
                const languageEl = document.getElementById('language');
                const familySizeEl = document.getElementById('familySize');
                const referralCodeEl = document.getElementById('referralCode');
                
                const formData = {
                    userName: userNameEl ? userNameEl.value.trim() : '',
                    userAge: userAgeEl ? userAgeEl.value : '',
                    language: languageEl ? languageEl.value : 'English',
                    userType: selectedUserType,
                    familySize: familySizeEl ? familySizeEl.value : null,
                    accessTier: selectedAccessTier,
                    referralCode: referralCodeEl ? referralCodeEl.value.trim() : ''
                };
                
                // Show loading state
                const joinButton = document.getElementById('joinButton');
                if (joinButton) {
                    joinButton.textContent = 'Joining Community...';
                    joinButton.disabled = true;
                }
                
                // Redirect to chat with URL parameters (zero storage approach)
                const params = new URLSearchParams({
                    name: formData.userName,
                    age: formData.userAge,
                    language: formData.language,
                    type: formData.userType,
                    access: formData.accessTier
                });
                
                if (formData.familySize) {
                    params.append('family_size', formData.familySize);
                }
                
                if (formData.referralCode) {
                    params.append('referral', formData.referralCode);
                }
                
                // Redirect to GitHub Pages chat interface
                setTimeout(() => {
                    window.location.href = 'chat.html?' + params.toString();
                }, 1500);
            });
        }

        // Initialize
        updateProgressSteps();
        
        // Add some nice animations
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.access-tier-card');
            if (cards) {
                cards.forEach((card, index) => {
                    if (!card) return;
                    
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            }
        });
    </script>
</body>
</html>